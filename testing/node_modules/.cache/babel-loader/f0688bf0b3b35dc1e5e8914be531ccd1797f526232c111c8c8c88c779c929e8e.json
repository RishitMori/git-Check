{"ast":null,"code":"var Emitter = require('component-emitter');\nvar Response = require('./response').Response;\nvar querystring = require('querystring');\nvar WebSocket;\nvar createWebSocket;\nif (global.WebSocket) {\n  WebSocket = global.WebSocket;\n  createWebSocket = function (uri, options) {\n    return new WebSocket(uri);\n  };\n} else {\n  WebSocket = require('ws');\n  createWebSocket = function (uri, options) {\n    return new WebSocket(uri, null, options);\n  };\n}\nvar scErrors = require('sc-errors');\nvar TimeoutError = scErrors.TimeoutError;\nvar BadConnectionError = scErrors.BadConnectionError;\nvar SCTransport = function (authEngine, codecEngine, options) {\n  var self = this;\n  this.state = this.CLOSED;\n  this.auth = authEngine;\n  this.codec = codecEngine;\n  this.options = options;\n  this.connectTimeout = options.connectTimeout;\n  this.pingTimeout = options.ackTimeout;\n  this.pingTimeoutDisabled = !!options.pingTimeoutDisabled;\n  this.callIdGenerator = options.callIdGenerator;\n  this.authTokenName = options.authTokenName;\n  this._pingTimeoutTicker = null;\n  this._callbackMap = {};\n  this._batchSendList = [];\n\n  // Open the connection.\n\n  this.state = this.CONNECTING;\n  var uri = this.uri();\n  var wsSocket = createWebSocket(uri, this.options);\n  wsSocket.binaryType = this.options.binaryType;\n  this.socket = wsSocket;\n  wsSocket.onopen = function () {\n    self._onOpen();\n  };\n  wsSocket.onclose = function (event) {\n    var code;\n    if (event.code == null) {\n      // This is to handle an edge case in React Native whereby\n      // event.code is undefined when the mobile device is locked.\n      // TODO: This is not perfect since this condition could also apply to\n      // an abnormal close (no close control frame) which would be a 1006.\n      code = 1005;\n    } else {\n      code = event.code;\n    }\n    self._onClose(code, event.reason);\n  };\n  wsSocket.onmessage = function (message, flags) {\n    self._onMessage(message.data);\n  };\n  wsSocket.onerror = function (error) {\n    // The onclose event will be called automatically after the onerror event\n    // if the socket is connected - Otherwise, if it's in the middle of\n    // connecting, we want to close it manually with a 1006 - This is necessary\n    // to prevent inconsistent behavior when running the client in Node.js\n    // vs in a browser.\n\n    if (self.state === self.CONNECTING) {\n      self._onClose(1006);\n    }\n  };\n  this._connectTimeoutRef = setTimeout(function () {\n    self._onClose(4007);\n    self.socket.close(4007);\n  }, this.connectTimeout);\n};\nSCTransport.prototype = Object.create(Emitter.prototype);\nSCTransport.CONNECTING = SCTransport.prototype.CONNECTING = 'connecting';\nSCTransport.OPEN = SCTransport.prototype.OPEN = 'open';\nSCTransport.CLOSED = SCTransport.prototype.CLOSED = 'closed';\nSCTransport.prototype.uri = function () {\n  var query = this.options.query || {};\n  var schema = this.options.secure ? 'wss' : 'ws';\n  if (this.options.timestampRequests) {\n    query[this.options.timestampParam] = new Date().getTime();\n  }\n  query = querystring.encode(query);\n  if (query.length) {\n    query = '?' + query;\n  }\n  var host;\n  if (this.options.host) {\n    host = this.options.host;\n  } else {\n    var port = '';\n    if (this.options.port && (schema === 'wss' && this.options.port !== 443 || schema === 'ws' && this.options.port !== 80)) {\n      port = ':' + this.options.port;\n    }\n    host = this.options.hostname + port;\n  }\n  return schema + '://' + host + this.options.path + query;\n};\nSCTransport.prototype._onOpen = function () {\n  var self = this;\n  clearTimeout(this._connectTimeoutRef);\n  this._resetPingTimeout();\n  this._handshake(function (err, status) {\n    if (err) {\n      var statusCode;\n      if (status && status.code) {\n        statusCode = status.code;\n      } else {\n        statusCode = 4003;\n      }\n      self._onError(err);\n      self._onClose(statusCode, err.toString());\n      self.socket.close(statusCode);\n    } else {\n      self.state = self.OPEN;\n      Emitter.prototype.emit.call(self, 'open', status);\n      self._resetPingTimeout();\n    }\n  });\n};\nSCTransport.prototype._handshake = function (callback) {\n  var self = this;\n  this.auth.loadToken(this.authTokenName, function (err, token) {\n    if (err) {\n      callback(err);\n    } else {\n      // Don't wait for this.state to be 'open'.\n      // The underlying WebSocket (this.socket) is already open.\n      var options = {\n        force: true\n      };\n      self.emit('#handshake', {\n        authToken: token\n      }, options, function (err, status) {\n        if (status) {\n          // Add the token which was used as part of authentication attempt\n          // to the status object.\n          status.authToken = token;\n          if (status.authError) {\n            status.authError = scErrors.hydrateError(status.authError);\n          }\n        }\n        callback(err, status);\n      });\n    }\n  });\n};\nSCTransport.prototype._abortAllPendingEventsDueToBadConnection = function (failureType) {\n  for (var i in this._callbackMap) {\n    if (this._callbackMap.hasOwnProperty(i)) {\n      var eventObject = this._callbackMap[i];\n      delete this._callbackMap[i];\n      clearTimeout(eventObject.timeout);\n      delete eventObject.timeout;\n      var errorMessage = \"Event '\" + eventObject.event + \"' was aborted due to a bad connection\";\n      var badConnectionError = new BadConnectionError(errorMessage, failureType);\n      var callback = eventObject.callback;\n      delete eventObject.callback;\n      callback.call(eventObject, badConnectionError, eventObject);\n    }\n  }\n};\nSCTransport.prototype._onClose = function (code, data) {\n  delete this.socket.onopen;\n  delete this.socket.onclose;\n  delete this.socket.onmessage;\n  delete this.socket.onerror;\n  clearTimeout(this._connectTimeoutRef);\n  clearTimeout(this._pingTimeoutTicker);\n  clearTimeout(this._batchTimeout);\n  if (this.state === this.OPEN) {\n    this.state = this.CLOSED;\n    Emitter.prototype.emit.call(this, 'close', code, data);\n    this._abortAllPendingEventsDueToBadConnection('disconnect');\n  } else if (this.state === this.CONNECTING) {\n    this.state = this.CLOSED;\n    Emitter.prototype.emit.call(this, 'openAbort', code, data);\n    this._abortAllPendingEventsDueToBadConnection('connectAbort');\n  }\n};\nSCTransport.prototype._handleEventObject = function (obj, message) {\n  if (obj && obj.event != null) {\n    var response = new Response(this, obj.cid);\n    Emitter.prototype.emit.call(this, 'event', obj.event, obj.data, response);\n  } else if (obj && obj.rid != null) {\n    var eventObject = this._callbackMap[obj.rid];\n    if (eventObject) {\n      clearTimeout(eventObject.timeout);\n      delete eventObject.timeout;\n      delete this._callbackMap[obj.rid];\n      if (eventObject.callback) {\n        var rehydratedError = scErrors.hydrateError(obj.error);\n        eventObject.callback(rehydratedError, obj.data);\n      }\n    }\n  } else {\n    Emitter.prototype.emit.call(this, 'event', 'raw', message);\n  }\n};\nSCTransport.prototype._onMessage = function (message) {\n  Emitter.prototype.emit.call(this, 'event', 'message', message);\n  var obj = this.decode(message);\n\n  // If ping\n  if (obj === '#1') {\n    this._resetPingTimeout();\n    if (this.socket.readyState === this.socket.OPEN) {\n      this.sendObject('#2');\n    }\n  } else {\n    if (Array.isArray(obj)) {\n      var len = obj.length;\n      for (var i = 0; i < len; i++) {\n        this._handleEventObject(obj[i], message);\n      }\n    } else {\n      this._handleEventObject(obj, message);\n    }\n  }\n};\nSCTransport.prototype._onError = function (err) {\n  Emitter.prototype.emit.call(this, 'error', err);\n};\nSCTransport.prototype._resetPingTimeout = function () {\n  if (this.pingTimeoutDisabled) {\n    return;\n  }\n  var self = this;\n  var now = new Date().getTime();\n  clearTimeout(this._pingTimeoutTicker);\n  this._pingTimeoutTicker = setTimeout(function () {\n    self._onClose(4000);\n    self.socket.close(4000);\n  }, this.pingTimeout);\n};\nSCTransport.prototype.getBytesReceived = function () {\n  return this.socket.bytesReceived;\n};\nSCTransport.prototype.close = function (code, data) {\n  code = code || 1000;\n  if (this.state === this.OPEN) {\n    var packet = {\n      code: code,\n      data: data\n    };\n    this.emit('#disconnect', packet);\n    this._onClose(code, data);\n    this.socket.close(code);\n  } else if (this.state === this.CONNECTING) {\n    this._onClose(code, data);\n    this.socket.close(code);\n  }\n};\nSCTransport.prototype.emitObject = function (eventObject, options) {\n  var simpleEventObject = {\n    event: eventObject.event,\n    data: eventObject.data\n  };\n  if (eventObject.callback) {\n    simpleEventObject.cid = eventObject.cid = this.callIdGenerator();\n    this._callbackMap[eventObject.cid] = eventObject;\n  }\n  this.sendObject(simpleEventObject, options);\n  return eventObject.cid || null;\n};\nSCTransport.prototype._handleEventAckTimeout = function (eventObject) {\n  if (eventObject.cid) {\n    delete this._callbackMap[eventObject.cid];\n  }\n  delete eventObject.timeout;\n  var callback = eventObject.callback;\n  if (callback) {\n    delete eventObject.callback;\n    var error = new TimeoutError(\"Event response for '\" + eventObject.event + \"' timed out\");\n    callback.call(eventObject, error, eventObject);\n  }\n};\n\n// The last two optional arguments (a and b) can be options and/or callback\nSCTransport.prototype.emit = function (event, data, a, b) {\n  var self = this;\n  var callback, options;\n  if (b) {\n    options = a;\n    callback = b;\n  } else {\n    if (a instanceof Function) {\n      options = {};\n      callback = a;\n    } else {\n      options = a;\n    }\n  }\n  var eventObject = {\n    event: event,\n    data: data,\n    callback: callback\n  };\n  if (callback && !options.noTimeout) {\n    eventObject.timeout = setTimeout(function () {\n      self._handleEventAckTimeout(eventObject);\n    }, this.options.ackTimeout);\n  }\n  var cid = null;\n  if (this.state === this.OPEN || options.force) {\n    cid = this.emitObject(eventObject, options);\n  }\n  return cid;\n};\nSCTransport.prototype.cancelPendingResponse = function (cid) {\n  delete this._callbackMap[cid];\n};\nSCTransport.prototype.decode = function (message) {\n  return this.codec.decode(message);\n};\nSCTransport.prototype.encode = function (object) {\n  return this.codec.encode(object);\n};\nSCTransport.prototype.send = function (data) {\n  if (this.socket.readyState !== this.socket.OPEN) {\n    this._onClose(1005);\n  } else {\n    this.socket.send(data);\n  }\n};\nSCTransport.prototype.serializeObject = function (object) {\n  var str, formatError;\n  try {\n    str = this.encode(object);\n  } catch (err) {\n    formatError = err;\n    this._onError(formatError);\n  }\n  if (!formatError) {\n    return str;\n  }\n  return null;\n};\nSCTransport.prototype.sendObjectBatch = function (object) {\n  var self = this;\n  this._batchSendList.push(object);\n  if (this._batchTimeout) {\n    return;\n  }\n  this._batchTimeout = setTimeout(function () {\n    delete self._batchTimeout;\n    if (self._batchSendList.length) {\n      var str = self.serializeObject(self._batchSendList);\n      if (str != null) {\n        self.send(str);\n      }\n      self._batchSendList = [];\n    }\n  }, this.options.pubSubBatchDuration || 0);\n};\nSCTransport.prototype.sendObjectSingle = function (object) {\n  var str = this.serializeObject(object);\n  if (str != null) {\n    this.send(str);\n  }\n};\nSCTransport.prototype.sendObject = function (object, options) {\n  if (options && options.batch) {\n    this.sendObjectBatch(object);\n  } else {\n    this.sendObjectSingle(object);\n  }\n};\nmodule.exports.SCTransport = SCTransport;","map":{"version":3,"names":["Emitter","require","Response","querystring","WebSocket","createWebSocket","global","uri","options","scErrors","TimeoutError","BadConnectionError","SCTransport","authEngine","codecEngine","self","state","CLOSED","auth","codec","connectTimeout","pingTimeout","ackTimeout","pingTimeoutDisabled","callIdGenerator","authTokenName","_pingTimeoutTicker","_callbackMap","_batchSendList","CONNECTING","wsSocket","binaryType","socket","onopen","_onOpen","onclose","event","code","_onClose","reason","onmessage","message","flags","_onMessage","data","onerror","error","_connectTimeoutRef","setTimeout","close","prototype","Object","create","OPEN","query","schema","secure","timestampRequests","timestampParam","Date","getTime","encode","length","host","port","hostname","path","clearTimeout","_resetPingTimeout","_handshake","err","status","statusCode","_onError","toString","emit","call","callback","loadToken","token","force","authToken","authError","hydrateError","_abortAllPendingEventsDueToBadConnection","failureType","i","hasOwnProperty","eventObject","timeout","errorMessage","badConnectionError","_batchTimeout","_handleEventObject","obj","response","cid","rid","rehydratedError","decode","readyState","sendObject","Array","isArray","len","now","getBytesReceived","bytesReceived","packet","emitObject","simpleEventObject","_handleEventAckTimeout","a","b","Function","noTimeout","cancelPendingResponse","object","send","serializeObject","str","formatError","sendObjectBatch","push","pubSubBatchDuration","sendObjectSingle","batch","module","exports"],"sources":["C:/Users/123/OneDrive/Desktop/git practice/git_destop/git-Check/testing/node_modules/socketcluster-client/lib/sctransport.js"],"sourcesContent":["var Emitter = require('component-emitter');\nvar Response = require('./response').Response;\nvar querystring = require('querystring');\nvar WebSocket;\nvar createWebSocket;\n\nif (global.WebSocket) {\n  WebSocket = global.WebSocket;\n  createWebSocket = function (uri, options) {\n    return new WebSocket(uri);\n  };\n} else {\n  WebSocket = require('ws');\n  createWebSocket = function (uri, options) {\n    return new WebSocket(uri, null, options);\n  };\n}\n\nvar scErrors = require('sc-errors');\nvar TimeoutError = scErrors.TimeoutError;\nvar BadConnectionError = scErrors.BadConnectionError;\n\n\nvar SCTransport = function (authEngine, codecEngine, options) {\n  var self = this;\n\n  this.state = this.CLOSED;\n  this.auth = authEngine;\n  this.codec = codecEngine;\n  this.options = options;\n  this.connectTimeout = options.connectTimeout;\n  this.pingTimeout = options.ackTimeout;\n  this.pingTimeoutDisabled = !!options.pingTimeoutDisabled;\n  this.callIdGenerator = options.callIdGenerator;\n  this.authTokenName = options.authTokenName;\n\n  this._pingTimeoutTicker = null;\n  this._callbackMap = {};\n  this._batchSendList = [];\n\n  // Open the connection.\n\n  this.state = this.CONNECTING;\n  var uri = this.uri();\n\n  var wsSocket = createWebSocket(uri, this.options);\n  wsSocket.binaryType = this.options.binaryType;\n\n  this.socket = wsSocket;\n\n  wsSocket.onopen = function () {\n    self._onOpen();\n  };\n\n  wsSocket.onclose = function (event) {\n    var code;\n    if (event.code == null) {\n      // This is to handle an edge case in React Native whereby\n      // event.code is undefined when the mobile device is locked.\n      // TODO: This is not perfect since this condition could also apply to\n      // an abnormal close (no close control frame) which would be a 1006.\n      code = 1005;\n    } else {\n      code = event.code;\n    }\n    self._onClose(code, event.reason);\n  };\n\n  wsSocket.onmessage = function (message, flags) {\n    self._onMessage(message.data);\n  };\n\n  wsSocket.onerror = function (error) {\n    // The onclose event will be called automatically after the onerror event\n    // if the socket is connected - Otherwise, if it's in the middle of\n    // connecting, we want to close it manually with a 1006 - This is necessary\n    // to prevent inconsistent behavior when running the client in Node.js\n    // vs in a browser.\n\n    if (self.state === self.CONNECTING) {\n      self._onClose(1006);\n    }\n  };\n\n  this._connectTimeoutRef = setTimeout(function () {\n    self._onClose(4007);\n    self.socket.close(4007);\n  }, this.connectTimeout);\n};\n\nSCTransport.prototype = Object.create(Emitter.prototype);\n\nSCTransport.CONNECTING = SCTransport.prototype.CONNECTING = 'connecting';\nSCTransport.OPEN = SCTransport.prototype.OPEN = 'open';\nSCTransport.CLOSED = SCTransport.prototype.CLOSED = 'closed';\n\nSCTransport.prototype.uri = function () {\n  var query = this.options.query || {};\n  var schema = this.options.secure ? 'wss' : 'ws';\n\n  if (this.options.timestampRequests) {\n    query[this.options.timestampParam] = (new Date()).getTime();\n  }\n\n  query = querystring.encode(query);\n\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var host;\n  if (this.options.host) {\n    host = this.options.host;\n  } else {\n    var port = '';\n\n    if (this.options.port && ((schema === 'wss' && this.options.port !== 443)\n      || (schema === 'ws' && this.options.port !== 80))) {\n      port = ':' + this.options.port;\n    }\n    host = this.options.hostname + port;\n  }\n\n  return schema + '://' + host + this.options.path + query;\n};\n\nSCTransport.prototype._onOpen = function () {\n  var self = this;\n\n  clearTimeout(this._connectTimeoutRef);\n  this._resetPingTimeout();\n\n  this._handshake(function (err, status) {\n    if (err) {\n      var statusCode;\n      if (status && status.code) {\n        statusCode = status.code;\n      } else {\n        statusCode = 4003;\n      }\n      self._onError(err);\n      self._onClose(statusCode, err.toString());\n      self.socket.close(statusCode);\n    } else {\n      self.state = self.OPEN;\n      Emitter.prototype.emit.call(self, 'open', status);\n      self._resetPingTimeout();\n    }\n  });\n};\n\nSCTransport.prototype._handshake = function (callback) {\n  var self = this;\n  this.auth.loadToken(this.authTokenName, function (err, token) {\n    if (err) {\n      callback(err);\n    } else {\n      // Don't wait for this.state to be 'open'.\n      // The underlying WebSocket (this.socket) is already open.\n      var options = {\n        force: true\n      };\n      self.emit('#handshake', {\n        authToken: token\n      }, options, function (err, status) {\n        if (status) {\n          // Add the token which was used as part of authentication attempt\n          // to the status object.\n          status.authToken = token;\n          if (status.authError) {\n            status.authError = scErrors.hydrateError(status.authError);\n          }\n        }\n        callback(err, status);\n      });\n    }\n  });\n};\n\nSCTransport.prototype._abortAllPendingEventsDueToBadConnection = function (failureType) {\n  for (var i in this._callbackMap) {\n    if (this._callbackMap.hasOwnProperty(i)) {\n      var eventObject = this._callbackMap[i];\n      delete this._callbackMap[i];\n\n      clearTimeout(eventObject.timeout);\n      delete eventObject.timeout;\n\n      var errorMessage = \"Event '\" + eventObject.event +\n        \"' was aborted due to a bad connection\";\n      var badConnectionError = new BadConnectionError(errorMessage, failureType);\n\n      var callback = eventObject.callback;\n      delete eventObject.callback;\n      callback.call(eventObject, badConnectionError, eventObject);\n    }\n  }\n};\n\nSCTransport.prototype._onClose = function (code, data) {\n  delete this.socket.onopen;\n  delete this.socket.onclose;\n  delete this.socket.onmessage;\n  delete this.socket.onerror;\n\n  clearTimeout(this._connectTimeoutRef);\n  clearTimeout(this._pingTimeoutTicker);\n  clearTimeout(this._batchTimeout);\n\n  if (this.state === this.OPEN) {\n    this.state = this.CLOSED;\n    Emitter.prototype.emit.call(this, 'close', code, data);\n    this._abortAllPendingEventsDueToBadConnection('disconnect');\n\n  } else if (this.state === this.CONNECTING) {\n    this.state = this.CLOSED;\n    Emitter.prototype.emit.call(this, 'openAbort', code, data);\n    this._abortAllPendingEventsDueToBadConnection('connectAbort');\n  }\n};\n\nSCTransport.prototype._handleEventObject = function (obj, message) {\n  if (obj && obj.event != null) {\n    var response = new Response(this, obj.cid);\n    Emitter.prototype.emit.call(this, 'event', obj.event, obj.data, response);\n  } else if (obj && obj.rid != null) {\n    var eventObject = this._callbackMap[obj.rid];\n    if (eventObject) {\n      clearTimeout(eventObject.timeout);\n      delete eventObject.timeout;\n      delete this._callbackMap[obj.rid];\n\n      if (eventObject.callback) {\n        var rehydratedError = scErrors.hydrateError(obj.error);\n        eventObject.callback(rehydratedError, obj.data);\n      }\n    }\n  } else {\n    Emitter.prototype.emit.call(this, 'event', 'raw', message);\n  }\n};\n\nSCTransport.prototype._onMessage = function (message) {\n  Emitter.prototype.emit.call(this, 'event', 'message', message);\n\n  var obj = this.decode(message);\n\n  // If ping\n  if (obj === '#1') {\n    this._resetPingTimeout();\n    if (this.socket.readyState === this.socket.OPEN) {\n      this.sendObject('#2');\n    }\n  } else {\n    if (Array.isArray(obj)) {\n      var len = obj.length;\n      for (var i = 0; i < len; i++) {\n        this._handleEventObject(obj[i], message);\n      }\n    } else {\n      this._handleEventObject(obj, message);\n    }\n  }\n};\n\nSCTransport.prototype._onError = function (err) {\n  Emitter.prototype.emit.call(this, 'error', err);\n};\n\nSCTransport.prototype._resetPingTimeout = function () {\n  if (this.pingTimeoutDisabled) {\n    return;\n  }\n  var self = this;\n\n  var now = (new Date()).getTime();\n  clearTimeout(this._pingTimeoutTicker);\n\n  this._pingTimeoutTicker = setTimeout(function () {\n    self._onClose(4000);\n    self.socket.close(4000);\n  }, this.pingTimeout);\n};\n\nSCTransport.prototype.getBytesReceived = function () {\n  return this.socket.bytesReceived;\n};\n\nSCTransport.prototype.close = function (code, data) {\n  code = code || 1000;\n\n  if (this.state === this.OPEN) {\n    var packet = {\n      code: code,\n      data: data\n    };\n    this.emit('#disconnect', packet);\n\n    this._onClose(code, data);\n    this.socket.close(code);\n\n  } else if (this.state === this.CONNECTING) {\n    this._onClose(code, data);\n    this.socket.close(code);\n  }\n};\n\nSCTransport.prototype.emitObject = function (eventObject, options) {\n  var simpleEventObject = {\n    event: eventObject.event,\n    data: eventObject.data\n  };\n\n  if (eventObject.callback) {\n    simpleEventObject.cid = eventObject.cid = this.callIdGenerator();\n    this._callbackMap[eventObject.cid] = eventObject;\n  }\n\n  this.sendObject(simpleEventObject, options);\n\n  return eventObject.cid || null;\n};\n\nSCTransport.prototype._handleEventAckTimeout = function (eventObject) {\n  if (eventObject.cid) {\n    delete this._callbackMap[eventObject.cid];\n  }\n  delete eventObject.timeout;\n\n  var callback = eventObject.callback;\n  if (callback) {\n    delete eventObject.callback;\n    var error = new TimeoutError(\"Event response for '\" + eventObject.event + \"' timed out\");\n    callback.call(eventObject, error, eventObject);\n  }\n};\n\n// The last two optional arguments (a and b) can be options and/or callback\nSCTransport.prototype.emit = function (event, data, a, b) {\n  var self = this;\n\n  var callback, options;\n\n  if (b) {\n    options = a;\n    callback = b;\n  } else {\n    if (a instanceof Function) {\n      options = {};\n      callback = a;\n    } else {\n      options = a;\n    }\n  }\n\n  var eventObject = {\n    event: event,\n    data: data,\n    callback: callback\n  };\n\n  if (callback && !options.noTimeout) {\n    eventObject.timeout = setTimeout(function () {\n      self._handleEventAckTimeout(eventObject);\n    }, this.options.ackTimeout);\n  }\n\n  var cid = null;\n  if (this.state === this.OPEN || options.force) {\n    cid = this.emitObject(eventObject, options);\n  }\n  return cid;\n};\n\nSCTransport.prototype.cancelPendingResponse = function (cid) {\n  delete this._callbackMap[cid];\n};\n\nSCTransport.prototype.decode = function (message) {\n  return this.codec.decode(message);\n};\n\nSCTransport.prototype.encode = function (object) {\n  return this.codec.encode(object);\n};\n\nSCTransport.prototype.send = function (data) {\n  if (this.socket.readyState !== this.socket.OPEN) {\n    this._onClose(1005);\n  } else {\n    this.socket.send(data);\n  }\n};\n\nSCTransport.prototype.serializeObject = function (object) {\n  var str, formatError;\n  try {\n    str = this.encode(object);\n  } catch (err) {\n    formatError = err;\n    this._onError(formatError);\n  }\n  if (!formatError) {\n    return str;\n  }\n  return null;\n};\n\nSCTransport.prototype.sendObjectBatch = function (object) {\n  var self = this;\n\n  this._batchSendList.push(object);\n  if (this._batchTimeout) {\n    return;\n  }\n\n  this._batchTimeout = setTimeout(function () {\n    delete self._batchTimeout;\n    if (self._batchSendList.length) {\n      var str = self.serializeObject(self._batchSendList);\n      if (str != null) {\n        self.send(str);\n      }\n      self._batchSendList = [];\n    }\n  }, this.options.pubSubBatchDuration || 0);\n};\n\nSCTransport.prototype.sendObjectSingle = function (object) {\n  var str = this.serializeObject(object);\n  if (str != null) {\n    this.send(str);\n  }\n};\n\nSCTransport.prototype.sendObject = function (object, options) {\n  if (options && options.batch) {\n    this.sendObjectBatch(object);\n  } else {\n    this.sendObjectSingle(object);\n  }\n};\n\nmodule.exports.SCTransport = SCTransport;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}